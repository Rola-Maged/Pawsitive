import { createRequire } from 'node:module';

import chalk from 'chalk';

const _require = createRequire(import.meta.url);
export interface CloudConfiguration {
  include?: Array<string>;
}

/**
 * Get configuration file
 * @param path
 */
const loadConfiguration = (path: string): CloudConfiguration => {
  let configuration: CloudConfiguration;

  try {
    configuration = _require(path);
  } catch (err) {
    console.log(
      chalk.red(
        'Configuration file missing.',
      ),
    );
    process.exit(1);
  }
  // eslint-disable-next-line @typescript-eslint/no-var-requires

  return configuration;
};

export default loadConfiguration;
